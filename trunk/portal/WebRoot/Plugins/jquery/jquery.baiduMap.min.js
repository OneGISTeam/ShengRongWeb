(function(n){var t=function(n){this.init(n)};t.prototype={init:function(t){var i={id:"",title:{text:"",className:""},content:[],point:{lng:"",lat:""},level:15,icon:""};this.opts=n.extend({},i,t);this.renderMap()},renderMap:function(){var n=this.opts;var t=n.id;var i=n.level||15;var o=this.map=new BMap.Map(t);var a=this.point=new BMap.Point(n.point.lng,n.point.lat);if(!t){throw"id不能为空"}o.centerAndZoom(a,i);this.addControl();this.createMarker();this.renderInfoWindow()},addControl:function(){var n=this.map;var t=this.opts.type;n.addControl(new BMap.NavigationControl);n.addControl(new BMap.ScaleControl);n.addControl(new BMap.OverviewMapControl);if(t){n.addControl(new BMap.MapTypeControl)}},createMarker:function(){var n=this;var t=this.map;var i=this.point;var o=new BMap.Marker(i);var a=this.opts.icon;var e=a.url;if(e){o=new BMap.Marker(i,{icon:new BMap.Icon(e,new BMap.Size(a.width,a.height))})}t.addOverlay(o);o.addEventListener("click",function(){n.openInfoWindow()})},renderInfoWindow:function(){var t=this.map;var i=this.point;var o=this.opts;var a=o.content.text;var e="";if(a.length>0){n.each(a,function(n,t){e+='<div class="'+o.content.className+'">'+t+"</div>"})}var r=this.infoWindow=new BMap.InfoWindow(e,{width:o.width||0,height:o.height||0,title:'<div class="'+o.title.className+'">'+o.title.text+"</div>"});this.openInfoWindow()},openInfoWindow:function(){var n=this.map;var t=this.point;var i=this.infoWindow;if(!i.isOpen()){n.openInfoWindow(i,t)}}};window.BaiduMap=t})(jQuery);